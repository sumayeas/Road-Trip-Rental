{% extends 'base.html' %}
{% load static %}

{% block styles %}
<style>
    body {
        background: #181818;
        color: #fff;
    }
    .drivers-hero-bg {
        position: relative;
        width: 100vw;
        min-height: 420px;
        background: #181818;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        margin-top: -60px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.7);
    }
    .drivers-hero-bg img {
        width: 100vw;
        max-width: 100%;
        min-height: 420px;
        object-fit: cover;
        display: block;
        margin: 0 auto;
        filter: grayscale(1) brightness(0.5) contrast(1.2);
        z-index: 1;
        position: absolute;
        top: 0; left: 0;
    }
    .drivers-hero-overlay {
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        background: linear-gradient(120deg, rgba(24,24,24,0.92) 60%, rgba(24,24,24,0.98) 100%);
        z-index: 2;
        pointer-events: none;
    }
    .drivers-hero-title {
        position: relative;
        color: #fff;
        font-size: 3vw;
        font-family: 'Segoe UI', Arial, sans-serif;
        font-weight: 700;
        text-align: center;
        z-index: 3;
        letter-spacing: 2px;
        text-shadow: 0 4px 24px #000, 0 2px 8px rgba(0,0,0,0.7);
        margin-top: 0;
        margin-bottom: 0;
    }
    .drivers-hero-desc {
        position: relative;
        color: #ff0036;
        font-size: 1.2vw;
        font-family: 'Segoe UI', Arial, sans-serif;
        font-weight: 400;
        z-index: 3;
        text-align: center;
        letter-spacing: 1px;
        text-shadow: 0 2px 8px #181818;
        margin-top: 18px;
    }
    .blog-container {
        max-width: 1200px;
        margin: 30px auto;
        padding: 0 20px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        min-height: calc(100vh - 166px);
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
    }
    .card-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 25px;
    }
    .blog-card {
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .blog-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.15);
    }
    .card-image-container {
        height: 200px;
        overflow: hidden;
    }
    .card-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }
    .blog-card:hover .card-image {
        transform: scale(1.05);
    }
    .card-body {
        padding: 20px;
    }
    .blog-title {
        font-size: 1.3rem;
        margin: 0 0 10px 0;
        color: #2c3e50;
    }
    .blog-category {
        display: inline-block;
        background: #f1f1f1;
        color: #7f8c8d;
        padding: 4px 10px;
        border-radius: 20px;
        font-size: 0.8rem;
        margin-bottom: 15px;
    }
    .read-more-btn {
        display: inline-block;
        background: #ff0036;
        color: white;
        padding: 8px 20px;
        border-radius: 5px;
        text-decoration: none;
        font-weight: 500;
        transition: background 0.3s ease;
    }
    .read-more-btn:hover {
        background: #b30024;
    }
    @media (max-width: 900px) {
        .drivers-hero-title { font-size: 5vw; }
        .drivers-hero-bg { min-height: 260px; }
        .drivers-hero-bg img { min-height: 260px; }
        .drivers-hero-desc { font-size: 2vw; }
        .card-container { grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); }
    }
    @media (max-width: 600px) {
        .drivers-hero-title { font-size: 7vw; }
        .drivers-hero-bg { min-height: 160px; }
        .drivers-hero-bg img { min-height: 160px; }
        .drivers-hero-desc { font-size: 3vw; }
        .card-container { grid-template-columns: 1fr; }
    }
</style>
{% endblock styles %}

{% block content %}
<div class="drivers-hero-bg">
    <img src="{% static 'IMG/BMW M5 Competition.jpg' %}" alt="Driver Background">
    <div class="drivers-hero-overlay"></div>
    <div style="position: relative; z-index: 3; width: 100%;">
        <h1 class="drivers-hero-title">Meet Our Drivers</h1>
        <div class="drivers-hero-desc">Professional drivers for your safe journey</div>
    </div>
</div>

<div class="blog-container">
    <div class="card-container">
        {% for driver in drivers %}
        <div class="blog-card">
            {% if driver.image %}
            <div class="card-image-container">
                <img src="{{ driver.image.url }}" alt="{{ driver.name }}" class="card-image">
            </div>
            {% endif %}
            <div class="card-body">
                <h3 class="blog-title">{{ driver.name }}</h3>
                <span class="blog-category">Phone: {{ driver.phone_number }}</span><br>
                <span class="blog-category">DOB: {{ driver.date_of_birth }}</span><br>
                {% if driver.driving_license_image %}
                <span class="blog-category">License:</span>
                {% if user.is_authenticated and user.user_type == "passenger" %}
                    <img src="{{ driver.driving_license_image.url }}" alt="License" style="max-width:100px; border-radius:8px; margin-top:8px; cursor:pointer;" onclick="showLicenseModal('{{ driver.driving_license_image.url }}')">
                {% else %}
                    <img src="{{ driver.driving_license_image.url }}" alt="License" style="max-width:100px; border-radius:8px; margin-top:8px;">
                {% endif %}
                {% endif %}
                {% if user.is_authenticated and user.user_type == "owner" and driver.owner == user %}
                <div style="margin-top:12px;">
                    <a href="{% url 'edit_driver' driver.id %}" class="read-more-btn">Edit</a>
                    <a href="{% url 'delete_driver' driver.id %}" class="read-more-btn" style="background:#b30024;">Delete</a>
                </div>
                {% endif %}
            </div>
        </div>
        {% empty %}
        <div>No drivers found.</div>
        {% endfor %}
    </div>
    {% if user.is_authenticated and user.user_type == "owner" %}
    <a href="{% url 'add_driver' %}" class="add-driver-btn" title="Add driver">
        <span style="display: flex; align-items: center; justify-content: center;">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" viewBox="0 0 24 24" stroke="white" style="margin-right:10px;"><circle cx="12" cy="12" r="10" stroke="#fff" stroke-width="2" fill="#009688"/><path stroke="#fff" stroke-width="2" d="M12 8v8M8 12h8"/></svg>
            <span style="font-size:1.2rem; font-weight:700; letter-spacing:1px;">Add Driver</span>
        </span>
    </a>
    <style>
    .add-driver-btn {
        display: inline-block;
        margin: 32px auto 0 auto;
        padding: 16px 38px;
        background: linear-gradient(90deg, #009688 0%, #00bcd4 100%);
        color: #fff;
        border: none;
        border-radius: 12px;
        font-size: 1.15rem;
        font-weight: 700;
        box-shadow: 0 8px 32px rgba(0,188,212,0.18);
        text-decoration: none;
        transition: background 0.2s, box-shadow 0.2s, transform 0.2s;
        text-align: center;
    }
    .add-driver-btn:hover, .add-driver-btn:focus {
        background: linear-gradient(90deg, #00bcd4 0%, #009688 100%);
        box-shadow: 0 12px 36px rgba(0,188,212,0.28);
        transform: scale(1.04);
        color: #fff;
        text-decoration: none;
    }
    </style>
    {% endif %}

    <script>
    function showLicenseModal(imgUrl) {
        let modal = document.createElement('div');
        modal.style.position = 'fixed';
        modal.style.top = 0;
        modal.style.left = 0;
        modal.style.width = '100vw';
        modal.style.height = '100vh';
        modal.style.background = 'rgba(0,0,0,0.85)';
        modal.style.display = 'flex';
        modal.style.alignItems = 'center';
        modal.style.justifyContent = 'center';
        modal.style.zIndex = 9999;
        modal.innerHTML = `<img src="${imgUrl}" style="max-width:90vw; max-height:80vh; border-radius:16px; box-shadow:0 8px 32px #000;">`;
        modal.onclick = function() { document.body.removeChild(modal); };
        document.body.appendChild(modal);
    }
    </script>
</div>
{% endblock content %}
